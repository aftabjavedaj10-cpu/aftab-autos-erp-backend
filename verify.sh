#!/bin/bash
# Aftab Autos ERP - Verification & Deployment Script

echo "ğŸ” Aftab Autos ERP - Pre-Launch Checklist"
echo "==========================================="
echo ""

# Check if in correct directory
if [ ! -f "INTEGRATION_GUIDE.md" ]; then
  echo "âŒ Please run this script from the project root directory"
  exit 1
fi

echo "âœ… Backend Files Verification"
echo "----------------------------"
[ -f "backend/app.js" ] && echo "  âœ“ app.js exists" || echo "  âœ— app.js missing"
[ -f "backend/.env" ] && echo "  âœ“ .env exists" || echo "  âœ— .env missing"
[ -f "backend/database.sql" ] && echo "  âœ“ database.sql exists" || echo "  âœ— database.sql missing"
[ -f "backend/config/db.js" ] && echo "  âœ“ db.js exists" || echo "  âœ— db.js missing"
[ -f "backend/controllers/productController.js" ] && echo "  âœ“ productController.js exists" || echo "  âœ— productController.js missing"
[ -f "backend/controllers/customerController.js" ] && echo "  âœ“ customerController.js exists" || echo "  âœ— customerController.js missing"
[ -f "backend/controllers/vendorController.js" ] && echo "  âœ“ vendorController.js exists" || echo "  âœ— vendorController.js missing"
[ -f "backend/controllers/categoryController.js" ] && echo "  âœ“ categoryController.js exists" || echo "  âœ— categoryController.js missing"
[ -f "backend/routes/products.js" ] && echo "  âœ“ products.js routes exist" || echo "  âœ— products.js routes missing"
[ -f "backend/routes/customers.js" ] && echo "  âœ“ customers.js routes exist" || echo "  âœ— customers.js routes missing"
[ -f "backend/routes/vendors.js" ] && echo "  âœ“ vendors.js routes exist" || echo "  âœ— vendors.js routes missing"
[ -f "backend/routes/categories.js" ] && echo "  âœ“ categories.js routes exist" || echo "  âœ— categories.js routes missing"

echo ""
echo "âœ… Frontend Files Verification"
echo "------------------------------"
[ -f "frontend/src/services/apiService.ts" ] && echo "  âœ“ apiService.ts exists" || echo "  âœ— apiService.ts missing"
[ -f "frontend/.env.local" ] && echo "  âœ“ .env.local exists" || echo "  âœ— .env.local missing"
[ -f "frontend/src/pages/Dashboard.tsx" ] && echo "  âœ“ Dashboard.tsx updated" || echo "  âœ— Dashboard.tsx missing"
[ -f "frontend/src/components/ImportModal.tsx" ] && echo "  âœ“ ImportModal.tsx exists" || echo "  âœ— ImportModal.tsx missing"

echo ""
echo "ğŸ“‹ Quick Start Instructions"
echo "============================"
echo ""
echo "1ï¸âƒ£  Backend Setup:"
echo "   cd backend"
echo "   npm install"
echo "   npm start"
echo "   # Backend runs on http://localhost:5000"
echo ""
echo "2ï¸âƒ£  Database Setup (one-time):"
echo "   # Run database.sql on Railway PostgreSQL via dashboard query editor"
echo "   # Or use: psql \$DATABASE_URL < database.sql"
echo ""
echo "3ï¸âƒ£  Frontend Setup:"
echo "   cd frontend"
echo "   npm install"
echo "   npm run dev"
echo "   # Frontend runs on http://localhost:5173"
echo ""
echo "4ï¸âƒ£  Test Integration:"
echo "   curl http://localhost:5000/api/health"
echo "   curl http://localhost:5000/api/products"
echo ""
echo "âœ¨ Your ERP system is ready for testing!"
